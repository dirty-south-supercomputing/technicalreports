% oneside ought not be used for printed, bound material!
\documentclass[ebook,10pt,openany,oneside]{memoir}
\title{Pok√©mon GO: A Quantitative Approach}
\author{nick black}
%\special{pdf:minorversion 7}
% fucks up headers on attack type table
%\usepackage{unicode-math}
\usepackage{amsmath}
\usepackage{fontspec}
\defaultfontfeatures{Scale=MatchUppercase,Ligatures=TeX,Renderer=HarfBuzz}
\usepackage{microtype}
\usepackage{bookmark}
\usepackage{transparent}
\usepackage[svgnames,HSB,table]{xcolor}
\selectcolormodel{rgb}
\usepackage[labelfont=bf]{caption} % for \captionsetup
\usepackage{polyglossia}
\usepackage{pdfpages}
\usepackage{tabularray}
\usepackage[export]{adjustbox}
\usepackage{longtable}
\usepackage[listingsutf8]{tcolorbox}
\tcbuselibrary{most}
\usepackage{listings}
\usepackage[newfloat]{minted}
\usepackage{makecell}
\usepackage{varwidth}
\usepackage{ifthen}
\usepackage{multicol}
\usepackage{multirow}
\usepackage{biblatex}
\usepackage[siunitx]{circuitikz}
\usepackage[mode=text]{siunitx}
\setsansfont{Kanit}
\setmainfont{Gentium Book}
\setdefaultlanguage{american}
\newfontfamily\japanesefont[Script=CJK]{Noto Serif CJK JP}
\newfontfamily\chinesefont[Script=CJK]{Noto Serif CJK SC}
\setotherlanguages{japanese,chinese}
\usepackage{newunicodechar}
\usepackage{realscripts} % typographical enhancement for sub/superscripts
\usepackage{luatex85} % otherwise pdfx blows up =\
\usepackage[a-3u]{pdfx}
\newfontfamily{\symbolfont}{Symbola}
\newunicodechar{üüâ}{{\symbolfontüüâ}}
\newunicodechar{‚ìß}{{\symbolfont‚ìß}}
\newunicodechar{‚≠ò}{{\symbolfont‚≠ò}}
\newunicodechar{üåä}{{\symbolfontüåä}}
\newunicodechar{‚úã}{{\symbolfont‚úã}}
\newunicodechar{üêõ}{{\symbolfontüêõ}}
\newunicodechar{‚õ∞}{{\symbolfont‚õ∞}}
\newcolumntype{g}{>{\columncolor{Gray!25}}c} % for alternate column coloring in tables
\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}} % centering within p-type column

% we're either 6x9" or (less desirably) 8.5x11"
\settrims{0pt}{0pt}
\setstocksize{8.75in}{5.625in}
\settrimmedsize{8.5in}{5.5in}{*}
\setlrmarginsandblock{.75in}{*}{1}
\setulmarginsandblock{1in}{1in}{1}       % 2" of total vertical margin
\setlength{\headwidth}{\textwidth}       % don't go to the end of paperback
\settypeblocksize{7in}{\textwidth}{*}    % want 7in of our 9
\checkandfixthelayout                     % print and check layout % W: Command terminated with space. (1)

\newcommand\calign[1]{\raisebox{-0.25\height}{#1}}
% an IV+level specification
\newcommand{\ivlev}[4]{#1/#2/#3¬∑#4}

\NewTColorBox{speciesbox}{!O{}}{%
  enhanced,
  before skip=0pt,
  after skip=0pt,
  top=0pt,
  bottom=0pt,
  boxsep=0pt,
  middle=0pt,
  fonttitle=\bfseries,
  subtitle style={colback=Shadow!50!black},
  #1}

\NewTColorBox{tipbox}{!O{}}{%
  enhanced,
  title style={color=Shadow!50!black},
  halign title=flush center,
  fonttitle=\bfseries,
  #1}

%\renewcommand{\printtoctitle}[1]{}

\makeatletter
\newcommand*{\textoverline}[1]{$\overline{\hbox{#1}}\m@th$}
\makeatother

\chapterstyle{crosshead}

\setminted{fontsize=\scriptsize}

\renewcommand{\insertchapterspace}{}

\newcommand\Midrule[0]{\midrule}%

% taken from pgotypes.cpp
\definecolor{Shadow}{HTML}{C247FB}
\definecolor{Bug}{HTML}{A6B91A}
\definecolor{Dark}{HTML}{575063}
\definecolor{Dragon}{HTML}{6F35FC}
\definecolor{electric}{HTML}{F7D02C}
\colorlet{Electric}{electric!80!Black}
\definecolor{Fairy}{HTML}{D685AD}
\definecolor{Fighting}{HTML}{C22E28}
\definecolor{Fire}{HTML}{EE8130}
\definecolor{Flying}{HTML}{8D87DB}
\definecolor{Ghost}{HTML}{5066A3}
\definecolor{Grass}{HTML}{7AC74C}
\definecolor{Ground}{HTML}{D97A4B}
\definecolor{Ice}{HTML}{96D9D6}
\definecolor{Normal}{HTML}{9CA5AB}
\definecolor{Poison}{HTML}{A33EA1}
\definecolor{Psychic}{HTML}{F95587}
\definecolor{Rock}{HTML}{B6A136}
\definecolor{Steel}{HTML}{5E91A4}
\definecolor{Water}{HTML}{6390F0}

% combined list of tables and figures, to save space
\makeatletter
\renewcommand*{\ext@figure}{lot}
\let\c@figure\c@table
\let\ftype@figure\ftype@table
\let\listoftableandfigures\listoftables
\renewcommand*\listtablename{List of tables and figures}
\makeatother

\newenvironment{code}{\captionsetup{type=listing}}{}
\SetupFloatingEnvironment{listing}{name=Listing}

%\copypagestyle{dankpanion}{companion}
%\makeoddhead{dankpanion}{{\textbf{\leftmark}}}{}{\textbf{\thepage}}
%\makeevenhead{dankpanion}{{\large \TITLE}}{}{\textbf{\thepage}}

\def\LOGO {
  \textbf{
    \Huge Pok√©mon GO\\
    \Large A Quantitative Approach\\
  }}
\frontmatter
\begin{document}
  \pagestyle{empty}
  \begin{center}
  \LOGO
  \bigskip
  \center{\Large{nick black}}\\
  \vspace{3cm}
  \includegraphics[width=.75\pagewidth,keepaspectratio]{images/pikachuphd.png}
  \end{center}
  \vfill\hrule
  \begin{center}\textsf{Gold \& Appel Publishing}\end{center}
  \hrule
  \clearpage
  %\input{aux/copyright}
  %\clearpage
  \setcounter{page}{1}
  \pagestyle{plain} % want (roman) page numbers
\input{notice}
\clearpage
\ifdefined\epub
\else
  \hypertarget{toc}{}%
  \bookmark[dest=toc]{Organization}
  \tableofcontents*
  %\clearpage
  \hypertarget{lot}{}%
  \bookmark[dest=lot]{Tables and figures}
  \listoftables*
  %\hypertarget{lof}{}%
  %\bookmark[dest=lof]{List of Figures} % if we use 3, it changes to i instead of iii [shrug]
  %\listoffigures*
  \fi
\input{foreward}
%--------------------------main text------------------------------------------%
\mainmatter
%\pagestyle{companion}
\input{objectives}
\input{trainer}
\input{friends}
\input{spawn}
\input{types}
\input{attacks}
\input{species}
\input{pok√©mon}
\input{battle}
\input{ooo}
\input{tactics}
\input{unbounded}
\input{bounded}
\input{example}
\input{simul}
\appendix
\input{optimal}
\chapter{Species by typings\label{chap:speciesbytype}}
Forms are sorted by typing, and within typing by Pok√©dex number.
\vfill
\begin{center}\textbf{Interpreting form cards}\end{center}

The title displays the form name on the left.
If a Shiny form exists, the shiny icon (\calign{\includegraphics[height=1em,keepaspectratio]{images/shiny.png}}) is displayed.
The form's base ATK, DEF, and STA appear on the right, followed by the arithmetic and geometric means
 ($\frac{BS}{3}$ and $\sqrt[3]{BP}$).
The colors of the title bar indicate the typing.
To the right of a picture is a table of fast and charged attacks.
I have factored STAB into applicable attacks.
Fast attacks show turns, power, energy generated, PPT, and EPT\@.
Charged attacks show power, energy consumed, and PPE\@.
Attacks in italics cannot be acquired without an Elite TM or special circumstances.
Type, cost group, weather boosting, and existence of a Shiny form are indicated with icons.
The optimal configurations for CP2500 and CP1500-bounded play are specified below the attack table.
The last line of the card shows cost group, generation, and region on the left,
 and evolutionary line on the right.
Finally, if there is a Shadow form, that is indicated, along with the same stats
  provided for the regular form.
\vfill
\begin{speciesbox}[title=OV-099 Challenger,title style={left color=Flying,right color=Ghost},after title={\hfill 200 120 100 140.00 133.89}]
\footnotesize
\begin{tabularx}{\linewidth}{@{}c X @{}}
\includegraphics[width=0.3\linewidth,valign=c,keepaspectratio]{images/challenger.png} &
\begingroup
\setlength{\tabcolsep}{4pt}
\begin{tabular}{lrrrrr}
\includegraphics[height=1em,keepaspectratio]{images/ghost.png} Astonish & 3 & 14.4 & 10 & 4.8 & 3.3 \\
\includegraphics[height=1em,keepaspectratio]{images/fire.png} Incinerate & 5 & 20 & 20 & 4 & 4 \\
\includegraphics[height=1em,keepaspectratio]{images/flying.png} Brave Bird & & 156 & -55 & 2.84 & \\
\includegraphics[height=1em,keepaspectratio]{images/flying.png} Aeroblast & & 204 & -75 & 2.72 & \\
\end{tabular}
\endgroup
\end{tabularx}
\noindent\begin{minipage}{0.3\linewidth}
\includegraphics[height=1.5em,keepaspectratio]{images/flying.png}
\includegraphics[height=1.5em,keepaspectratio]{images/ghost.png}
\includegraphics[height=2em,keepaspectratio]{images/windy.png}
\includegraphics[height=2em,keepaspectratio]{images/fog.png}
\end{minipage}
\begin{minipage}{0.7\linewidth}\raggedleft{}
\vfill{}
  15/15/15@50 (1891)\\
  0/14/1@42.5 (1499)
\end{minipage}\\
CG 4 Gen X Atlantic\hfill{}Columbia ‚Üí \textbf{Challenger} ‚Üí Discovery
\tcbsubtitle[before skip=1pt,bottomrule=0pt]{Shadow OV-099 Challenger\hfill{240 100 100 146.67 133.89}}
\end{speciesbox}
\bigskip\noindent{}We see here that OV-099 Challenger has Ghost+Flying typing, with base ATK, DEF, and STA
of 200, 120, and 100, respectively. Its $\frac{BS}{3}$ is 140, and its $\sqrt[3]{BP}$ is 133.89.
It has a Shadow form, but not a Shiny form. The Shadow form has higher ATK and lower DEF, changing
its $\frac{BS}{3}$ to 146.67. Its optimal configuration for a CP1500 bound is 0/14/1 at level 42.5.
It is poorly suited for CP2500 bounds and liftoffs in low temperatures.
\clearpage
\input{out/species}
\vfill\includegraphics[width=\linewidth,keepaspectratio]{images/carnivine.png}\vfill

\chapter{Users of attacks\label{chap:attackemployers}}
It is often useful to build a team around attacks, rather than Pok√©mon.
This appendix lists the Pok√©mon which can learn and use a given attack.
Pok√©mon in italics will \textit{not} have STAB with the attack.
Pok√©mon in boldface require an Elite TM (or special circumstances) to acquire the move.
Attack cards display Nx1 stats in the middle of the title, and 3x3 stats on the right.
\section{Fast attacks\label{sec:usersfast}}
Fast attacks are sorted by type, then duration, then by the product of PPT and EPT\@.
\input{out/fastusers}
\section{Charged attacks\label{sec:userscharged}}
Charged attacks are sorted by type, then PPE\@.
\input{out/chargedusers}
\backmatter
\input{about}
\end{document}
